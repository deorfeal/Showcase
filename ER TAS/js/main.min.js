$(function () {
    // Функция для проверки на мобильные устройства
    function isMobileDevice() {
        return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
    }

    // Если устройство мобильное, то используем событие клика
    if (isMobileDevice()) {
        $(document).on('click', function (event) {
            // Проверяем, является ли цель клика элементом с классом '.lang'
            if (!$(event.target).closest('.lang').length) {
                // Если нет, убираем класс 'lang--active' у всех элементов с этим классом
                $('.lang').removeClass('lang--active');
            } else {
                // Иначе добавляем/убираем класс 'lang--active' для элемента с классом '.lang'
                $(event.target).closest('.lang').toggleClass('lang--active');
            }
        });
    } else { // Иначе используем событие ховера
        $('.lang').on('mouseover', function () {
            $(this).addClass('lang--active');
        });

        $('.lang').on('mouseout', function () {
            $(this).removeClass('lang--active');
        });
    }
});


$(function () {
    // Делаем попап и скрываем по клику вне его
    $(document).ready(function () {
        var $popupForm = $('.popup--consultation');
        var $popupFormInner = $popupForm.find('.popup__inner');

        var $popupSuccess = $('.popup--success');
        var $popupSuccessInner = $popupSuccess.find('.popup__inner');

        // Показываем или скрываем popup при клике на кнопке
        $('.show-popup').click(function (event) {
            $('.popup--active').removeClass('popup--active')
            event.stopPropagation(); // Остановка всплытия события
            $popupForm.addClass('popup--active');
            $popupForm.fadeIn(250, function () {
                // После показа попапа, делаем анимацию изменения opacity от 0 до 1
                $(this).animate({
                    opacity: 1
                }, 250);
            });
            $('body').addClass('body--popup');
        });

        // Показываем или скрываем popup при клике на кнопке
        $('.consultation-form__button').click(function (event) {
            $('.popup--active').removeClass('popup--active')
            $popupForm.fadeOut(250, function () {
                event.stopPropagation(); // Остановка всплытия события
                $popupSuccess.addClass('popup--active');
                $popupSuccess.fadeIn(250, function () {
                    // После показа попапа, делаем анимацию изменения opacity от 0 до 1
                    $(this).animate({
                        opacity: 1
                    }, 250);
                });
                $('body').addClass('body--popup');
            });
            $('.close').click(function (event) {
                $('.popup').fadeOut(250);
                $('body').removeClass('body--popup');
            });
            // Скрываем popup при клике вне его области (если попап активен)
            $(document).click(function (event) {
                if ($popupForm.hasClass('popup--active')) {
                    if (!($popupFormInner.is(event.target) || $popupFormInner.has(event.target).length > 0)) {
                        $popupForm.fadeOut(250);
                        $popupForm.removeClass('popup--active')
                        $('body').removeClass('body--popup');
                    }
                }
            });
            $(document).click(function (event) {
                if ($popupSuccess.hasClass('popup--active')) {
                    if (!($popupSuccessInner.is(event.target) || $popupSuccessInner.has(event.target).length > 0)) {
                        $popupSuccess.fadeOut(250);
                        $popupSuccess.removeClass('popup--active')
                        $('body').removeClass('body--popup');
                    }
                }
            });
        });
    });
});


$(function () {
    $('.burger').on('click', function (event) {
        $('body').toggleClass('body--menu');
    });

    $('.menu__list-link').on('click', function (event) {
        $('body').removeClass('body--menu');
    });
})

new Swiper('.heading-swiper', {
    slidesPerView: 1,
    loop: true,
    speed: 750,
    effect: 'fade',
    fadeEffect: {
        crossFade: true
    },
    navigation: {
        prevEl: '.heading-arrow--prev',
        nextEl: '.heading-arrow--next',
    },
    autoplay: {
        delay: 5000, // задержка между слайдами в миллисекундах
        disableOnInteraction: false, // если true, автопрокрутка остановится при взаимодействии пользователя с swiper
    },
});

new Swiper('.production-swiper', {
    slidesPerView: 3.8,
    loop: true,
    speed: 750,
    spaceBetween: 30,
    navigation: {
        prevEl: '.production-arrow--prev',
        nextEl: '.production-arrow--next',
    },
    pagination: {
        el: '.production--pagination',
        type: 'bullets',
        clickable: true,
    },
    breakpoints: {
        301: {
            slidesPerView: 1.5,
            loop: true,
            speed: 750,
            spaceBetween: 15,
        },
        701: {
            slidesPerView: 2.2,
            loop: true,
            speed: 750,
            spaceBetween: 15,
        },
        851: {
            slidesPerView: 2.5,
            loop: true,
            speed: 750,
            spaceBetween: 15,
        },
        951: {
            slidesPerView: 2.8,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
        1151: {
            slidesPerView: 3.2,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
        1251: {
            slidesPerView: 3.5,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
        1501: {
            slidesPerView: 3.8,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
    }
});

new Swiper('.projects-swiper', {
    slidesPerView: 2.8,
    loop: true,
    speed: 750,
    spaceBetween: 30,
    navigation: {
        prevEl: '.projects-arrow--prev',
        nextEl: '.projects-arrow--next',
    },
    pagination: {
        el: '.projects--pagination',
        type: 'bullets',
        clickable: true,
    },
    breakpoints: {
        301: {
            slidesPerView: 1.5,
            loop: true,
            speed: 750,
            spaceBetween: 15,
        },
        951: {
            slidesPerView: 2.5,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
        1251: {
            slidesPerView: 2.8,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
    }
});

new Swiper('.certificates-swiper', {
    slidesPerView: 6.4,
    loop: true,
    speed: 750,
    spaceBetween: 45,
    navigation: {
        prevEl: '.certificates-arrow--prev',
        nextEl: '.certificates-arrow--next',
    },
    pagination: {
        el: '.certificates--pagination',
        type: 'bullets',
        clickable: true,
    },
    breakpoints: {
        301: {
            slidesPerView: 2.2,
            loop: true,
            speed: 750,
            spaceBetween: 15,
        },
        551: {
            slidesPerView: 3.3,
            loop: true,
            speed: 750,
            spaceBetween: 15,
        },
        801: {
            slidesPerView: 3.9,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
        1001: {
            slidesPerView: 4.5,
            loop: true,
            speed: 750,
            spaceBetween: 30,
        },
        1251: {
            slidesPerView: 5.4,
            loop: true,
            speed: 750,
            spaceBetween: 45,
        },
        1501: {
            slidesPerView: 6.4,
            loop: true,
            speed: 750,
            spaceBetween: 45,
        },
    }
});